让我们重新梳理一下首页 (Home)的`schedule builder`的逻辑：

# 1、`sidebar.tsx`

## `Add New Item`按钮

- 当我点击`Add New Item`按钮时，弹出增加卡片的模态框
- 当我填写完卡片的信息，并且点击`add`时，会与已经存在的事件卡片进行核对
  - 如果与现有事件卡片不存在时间安排上的冲突，则可以创建卡片
  - 如果与现有事件卡片存在冲突，则提醒用户是“删除已经存在的卡片，还是修改当前卡片的信息”。
- 当我点击模态框上的`copy`按钮时，是复制了当前卡片上的信息，我看了一下复制出来的信息。我认为需要在信息上增加一个键值对，用来表示当前这个`builder`的名称，比如就叫`Schedule Builder`，因为后面我们还会做其他的排班表，比如`Employee schedule builder`，所以我希望这些信息能够区分开。如果你有更好的实现方案，你也可以说。
  - 当网站读取`local Storage`时，如果读取到的信息里的`builder`的名称跟当前网站页面的日历表的名字不一致，那么卡片就不应该出现在当前排班表里。
  - 当网站读取`local Storage`时，如果读取到的卡片的信息里的名字是`Schedule Builder`，而首页的这个日历的名字也叫做`Schedule Builder`，那么这个卡片就会出现在当前的这个日历视图里。

## `Day/Week`切换按钮

- 当我分别点击`day`和``week`时，可以切换周视图和日视图

## `Export/Download`按钮

- 点击`Export/Download`按钮，会触发付费墙的逻辑。关于付费墙的逻辑，后面需要重新梳理。

## `Reset`按钮

- 点击reset按钮，重置当前卡片。

## `settings`按钮

`settings`按钮需要集成以下设置，并且这些设置都是有效的，能够实际影响日式图和周视图

- layout
  - ![](./assets/2025-12-10%2010%2048%2018.png)
- time
  - ![](./assets/2025-12-10%2010%2048%2029.png)
  - 此处的 start hour 和 end hour，要实际有效。也就是说，当我设置好以后，会实实在在的影响日视图和周视图里的时间轴。
- event
  - ![](./assets/2025-12-10%2010%2048%2039.png)
- font
  - ![](./assets/2025-12-10%2010%2048%2048.png)

- others
  - ![](./assets/2025-12-10%2010%2055%2004.png)

# 2、`weekly-calendar.tsx`和`daily-calendar.tsx`

- 下文中提到的卡片，指的是日视图或周视图里可以拖拽的那些事件

## 卡片位置

- 卡片的位置可以进行上下拖动，但是他们相对于视图里的时间轴的位置一定是准确的。
- 也就是说，卡片在时间轴上所处的位置跟卡片上所显示的时间一定要是严格对上。

## 卡片拖拽

- 如果在卡片A的上方存在卡片B，当我拖拽卡片A进行向上移动时，当A碰到B时，则A不能再往上拖拽。
- 如果在卡片A的下方存在卡片B，当我拖拽卡片A进行向下移动时，当A碰到B时，则A不能再往下拖拽。

## 卡片设置

- 当我双击卡片时，会弹出一个模态框，可以修改当前卡片的信息，这个模式框可以参照`add-event-dialog.tsx`，不过上面的`add`按钮需要改成`确定`
- 当我右击卡片时，会弹出一个小框，上面显示编辑、删除选项
  - 当我点击编辑时，就会修改这个卡片的信息，跟双击的效果是一样的。
  - 当我点击删除时，会跟用户确认是否删除本卡片

